# Production Environment Configuration
# Copy this file to .env.production and fill in your values

# ============================================
# SUPABASE / DATABASE CONFIGURATION
# ============================================

# Supabase Project URL (from Settings > API)
SUPABASE_URL=https://YOUR_PROJECT_ID.supabase.co

# Supabase Anon Key (from Settings > API)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase Service Role Key (from Settings > API - keep secret!)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# PostgreSQL Connection String (from Settings > Database)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
DATABASE_URL=postgresql://postgres:YOUR_PASSWORD@postgres.YOUR_PROJECT_ID.supabase.co:5432/postgres?sslmode=require

# Database Host (from Settings > Database)
DB_HOST=postgres.YOUR_PROJECT_ID.supabase.co

# Database Port
DB_PORT=5432

# Database Name
DB_NAME=postgres

# Database User
DB_USER=postgres

# Database Password (from Settings > Database)
DB_PASSWORD=YOUR_PASSWORD

# ============================================
# AUTHENTICATION & JWT
# ============================================

# JWT Secret - Generate with: openssl rand -base64 32
# Or visit: https://www.random.org/cgi-bin/randbytes?nbytes=32&format=h
JWT_SECRET=YOUR_JWT_SECRET_KEY_HERE_MIN_32_CHARS

# JWT Token Expiry Time
JWT_EXPIRY=24h

# ============================================
# ENVIRONMENT & DEPLOYMENT
# ============================================

# Environment (production, staging, development)
NODE_ENV=production

# Log Level (error, warn, info, debug)
LOG_LEVEL=info

# Enable debug mode (true/false)
DEBUG=false

# ============================================
# MICROSERVICES CONFIGURATION
# ============================================

# Service Ports (for local development)
# For cloud deployment (Railway/Render), services auto-assign ports

AUTH_SERVICE_PORT=5001
USER_SERVICE_PORT=5002
PRODUCT_SERVICE_PORT=5003
PROVIDER_SERVICE_PORT=5004
TRUST_SERVICE_PORT=5005
MESSAGE_SERVICE_PORT=5006
NOTIFICATION_SERVICE_PORT=5007
GATEWAY_PORT=5000

# ============================================
# API GATEWAY
# ============================================

# Gateway Host
GATEWAY_HOST=0.0.0.0

# Service Base URLs (for routing)
# In local dev: http://localhost:PORT
# In production: https://api.reacher.app/service-name

AUTH_SERVICE_URL=http://localhost:5001
USER_SERVICE_URL=http://localhost:5002
PRODUCT_SERVICE_URL=http://localhost:5003
PROVIDER_SERVICE_URL=http://localhost:5004
TRUST_SERVICE_URL=http://localhost:5005
MESSAGE_SERVICE_URL=http://localhost:5006
NOTIFICATION_SERVICE_URL=http://localhost:5007

# ============================================
# FRONTEND CONFIGURATION
# ============================================

# Public API URL (visible to frontend)
# Update to your production domain
NEXT_PUBLIC_API_URL=https://api.reacher.app

# Frontend URL (for CORS)
FRONTEND_URL=https://reacher.app

# Auth Callback URL
NEXT_PUBLIC_AUTH_URL=https://api.reacher.app/auth

# ============================================
# CORS CONFIGURATION
# ============================================

# Allowed Origins (comma-separated)
CORS_ORIGINS=https://reacher.app,https://www.reacher.app

# Allow Credentials in CORS
CORS_CREDENTIALS=true

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================

# Email Service (sendgrid, mailgun, smtp, console)
EMAIL_SERVICE=sendgrid

# SendGrid API Key
SENDGRID_API_KEY=SG.YOUR_KEY_HERE

# OR SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Email From Address
EMAIL_FROM=noreply@reacher.app
EMAIL_FROM_NAME=Reacher

# ============================================
# FILE STORAGE CONFIGURATION (Optional)
# ============================================

# Supabase Storage Configuration
STORAGE_BUCKET=uploads
STORAGE_REGION=us-east-1
STORAGE_URL=https://YOUR_PROJECT_ID.supabase.co/storage/v1/object/public/uploads

# Max File Size (in bytes) - 10MB default
MAX_FILE_SIZE=10485760

# Allowed File Types (comma-separated)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# ============================================
# PAYMENT PROCESSING (Optional)
# ============================================

# Stripe Configuration
STRIPE_PUBLIC_KEY=pk_live_YOUR_KEY_HERE
STRIPE_SECRET_KEY=sk_live_YOUR_KEY_HERE
STRIPE_WEBHOOK_SECRET=whsec_YOUR_SECRET_HERE

# Payment Currency
PAYMENT_CURRENCY=USD

# ============================================
# REDIS CACHE (Optional)
# ============================================

# Redis URL (for caching, sessions)
REDIS_URL=redis://default:password@redis-host:6379

# Redis Database
REDIS_DB=0

# Cache TTL (Time To Live in seconds)
CACHE_TTL=3600

# ============================================
# MONITORING & LOGGING (Optional)
# ============================================

# Sentry Error Tracking
SENTRY_DSN=https://YOUR_KEY@sentry.io/PROJECT_ID

# LogRocket Session Replay
LOGROCKET_APP_ID=YOUR_APP_ID

# Datadog Metrics
DATADOG_API_KEY=YOUR_API_KEY

# ============================================
# SECURITY
# ============================================

# Password Hash Algorithm
PASSWORD_ALGORITHM=bcrypt

# Password Hash Rounds (higher = slower but more secure)
PASSWORD_ROUNDS=10

# Rate Limiting
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# FEATURE FLAGS (Optional)
# ============================================

# Enable/Disable Features
FEATURE_PAYMENTS=true
FEATURE_REVIEWS=true
FEATURE_MESSAGING=true
FEATURE_NOTIFICATIONS=true

# ============================================
# DEPLOYMENT PLATFORM SPECIFIC
# ============================================

# Railway Configuration
RAILWAY_ENVIRONMENT_NAME=production

# Render Configuration
RENDER_DEPLOYMENT_ID=YOUR_DEPLOYMENT_ID

# Heroku Configuration
HEROKU_APP_NAME=reacher-mvp

# ============================================
# NOTES
# ============================================
# 1. Never commit this file to git if it contains secrets
# 2. Use a secure method to manage secrets in production (GitHub Secrets, HashiCorp Vault, etc)
# 3. Rotate sensitive values regularly
# 4. Use different values for staging vs production
# 5. Keep backups of important configuration
# 6. Review security checklist before launch
